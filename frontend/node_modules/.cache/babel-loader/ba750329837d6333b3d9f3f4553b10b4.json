{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmo = void 0;\n\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\n\nvar mo_js_1 = require(\"../../common/Wrappers/mo.js\");\n\nvar mo_js_2 = require(\"../../../core/MmlTree/MmlNodes/mo.js\");\n\nvar VFUZZ = 0.1;\nvar HFUZZ = 0.1;\n\nvar SVGmo = function (_super) {\n  __extends(SVGmo, _super);\n\n  function SVGmo() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SVGmo.prototype.toSVG = function (parent) {\n    var attributes = this.node.attributes;\n    var symmetric = attributes.get('symmetric') && this.stretch.dir !== 2;\n    var stretchy = this.stretch.dir !== 0;\n\n    if (stretchy && this.size === null) {\n      this.getStretchedVariant([]);\n    }\n\n    var svg = this.standardSVGnode(parent);\n\n    if (stretchy && this.size < 0) {\n      this.stretchSVG();\n    } else {\n      var u = symmetric || attributes.get('largeop') ? this.fixed(this.getCenterOffset()) : '0';\n      var v = this.node.getProperty('mathaccent') ? this.fixed(this.getAccentOffset()) : '0';\n\n      if (u !== '0' || v !== '0') {\n        this.adaptor.setAttribute(svg, 'transform', \"translate(\" + v + \" \" + u + \")\");\n      }\n\n      this.addChildren(svg);\n    }\n  };\n\n  SVGmo.prototype.stretchSVG = function () {\n    var stretch = this.stretch.stretch;\n    var variants = this.getStretchVariants();\n    var bbox = this.getBBox();\n\n    if (this.stretch.dir === 1) {\n      this.stretchVertical(stretch, variants, bbox);\n    } else {\n      this.stretchHorizontal(stretch, variants, bbox);\n    }\n  };\n\n  SVGmo.prototype.getStretchVariants = function () {\n    var e_1, _a;\n\n    var c = this.stretch.c || this.getText().codePointAt(0);\n    var variants = [];\n\n    try {\n      for (var _b = __values(this.stretch.stretch.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var i = _c.value;\n        variants[i] = this.font.getStretchVariant(c, i);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    return variants;\n  };\n\n  SVGmo.prototype.stretchVertical = function (stretch, variant, bbox) {\n    var h = bbox.h,\n        d = bbox.d,\n        w = bbox.w;\n    var T = this.addTop(stretch[0], variant[0], h, w);\n    var B = this.addBot(stretch[2], variant[2], d, w);\n\n    if (stretch.length === 4) {\n      var _a = __read(this.addMidV(stretch[3], variant[3], w), 2),\n          H = _a[0],\n          D = _a[1];\n\n      this.addExtV(stretch[1], variant[1], h, 0, T, H, w);\n      this.addExtV(stretch[1], variant[1], 0, d, D, B, w);\n    } else {\n      this.addExtV(stretch[1], variant[1], h, d, T, B, w);\n    }\n  };\n\n  SVGmo.prototype.stretchHorizontal = function (stretch, variant, bbox) {\n    var w = bbox.w;\n    var L = this.addLeft(stretch[0], variant[0]);\n    var R = this.addRight(stretch[2], variant[2], w);\n\n    if (stretch.length === 4) {\n      var _a = __read(this.addMidH(stretch[3], variant[3], w), 2),\n          x1 = _a[0],\n          x2 = _a[1];\n\n      var w2 = w / 2;\n      this.addExtH(stretch[1], variant[1], w2, L, w2 - x1);\n      this.addExtH(stretch[1], variant[1], w2, x2 - w2, R, w2);\n    } else {\n      this.addExtH(stretch[1], variant[1], w, L, R);\n    }\n  };\n\n  SVGmo.prototype.getChar = function (n, variant) {\n    var char = this.font.getChar(variant, n) || [0, 0, 0, null];\n    return [char[0], char[1], char[2], char[3] || {}];\n  };\n\n  SVGmo.prototype.addGlyph = function (n, variant, x, y, parent) {\n    if (parent === void 0) {\n      parent = null;\n    }\n\n    return this.placeChar(n, x, y, parent || this.element, variant);\n  };\n\n  SVGmo.prototype.addTop = function (n, v, H, W) {\n    if (!n) return 0;\n\n    var _a = __read(this.getChar(n, v), 3),\n        h = _a[0],\n        d = _a[1],\n        w = _a[2];\n\n    this.addGlyph(n, v, (W - w) / 2, H - h);\n    return h + d;\n  };\n\n  SVGmo.prototype.addExtV = function (n, v, H, D, T, B, W) {\n    var _this = this;\n\n    if (!n) return;\n    T = Math.max(0, T - VFUZZ);\n    B = Math.max(0, B - VFUZZ);\n    var adaptor = this.adaptor;\n\n    var _a = __read(this.getChar(n, v), 3),\n        h = _a[0],\n        d = _a[1],\n        w = _a[2];\n\n    var Y = H + D - T - B;\n    var s = 1.5 * Y / (h + d);\n    var y = (s * (h - d) - Y) / 2;\n    if (Y <= 0) return;\n    var svg = this.svg('svg', {\n      width: this.fixed(w),\n      height: this.fixed(Y),\n      y: this.fixed(B - D),\n      x: this.fixed((W - w) / 2),\n      viewBox: [0, y, w, Y].map(function (x) {\n        return _this.fixed(x);\n      }).join(' ')\n    });\n    this.addGlyph(n, v, 0, 0, svg);\n    var glyph = adaptor.lastChild(svg);\n    adaptor.setAttribute(glyph, 'transform', \"scale(1,\" + this.jax.fixed(s) + \")\");\n    adaptor.append(this.element, svg);\n  };\n\n  SVGmo.prototype.addBot = function (n, v, D, W) {\n    if (!n) return 0;\n\n    var _a = __read(this.getChar(n, v), 3),\n        h = _a[0],\n        d = _a[1],\n        w = _a[2];\n\n    this.addGlyph(n, v, (W - w) / 2, d - D);\n    return h + d;\n  };\n\n  SVGmo.prototype.addMidV = function (n, v, W) {\n    if (!n) return [0, 0];\n\n    var _a = __read(this.getChar(n, v), 3),\n        h = _a[0],\n        d = _a[1],\n        w = _a[2];\n\n    var y = (d - h) / 2 + this.font.params.axis_height;\n    this.addGlyph(n, v, (W - w) / 2, y);\n    return [h + y, d - y];\n  };\n\n  SVGmo.prototype.addLeft = function (n, v) {\n    return n ? this.addGlyph(n, v, 0, 0) : 0;\n  };\n\n  SVGmo.prototype.addExtH = function (n, v, W, L, R, x) {\n    var _this = this;\n\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (!n) return;\n    R = Math.max(0, R - HFUZZ);\n    L = Math.max(0, L - HFUZZ);\n    var adaptor = this.adaptor;\n\n    var _a = __read(this.getChar(n, v), 3),\n        h = _a[0],\n        d = _a[1],\n        w = _a[2];\n\n    var X = W - L - R;\n    var Y = h + d + 2 * VFUZZ;\n    var s = 1.5 * (X / w);\n    var D = -(d + VFUZZ);\n    if (X <= 0) return;\n    var svg = this.svg('svg', {\n      width: this.fixed(X),\n      height: this.fixed(Y),\n      x: this.fixed(x + L),\n      y: this.fixed(D),\n      viewBox: [(s * w - X) / 2, D, X, Y].map(function (x) {\n        return _this.fixed(x);\n      }).join(' ')\n    });\n    this.addGlyph(n, v, 0, 0, svg);\n    var glyph = adaptor.lastChild(svg);\n    adaptor.setAttribute(glyph, 'transform', 'scale(' + this.jax.fixed(s) + ',1)');\n    adaptor.append(this.element, svg);\n  };\n\n  SVGmo.prototype.addRight = function (n, v, W) {\n    if (!n) return 0;\n    var w = this.getChar(n, v)[2];\n    return this.addGlyph(n, v, W - w, 0);\n  };\n\n  SVGmo.prototype.addMidH = function (n, v, W) {\n    if (!n) return [0, 0];\n    var w = this.getChar(n, v)[2];\n    this.addGlyph(n, v, (W - w) / 2, 0);\n    return [(W - w) / 2, (W + w) / 2];\n  };\n\n  SVGmo.kind = mo_js_2.MmlMo.prototype.kind;\n  return SVGmo;\n}(mo_js_1.CommonMoMixin(Wrapper_js_1.SVGWrapper));\n\nexports.SVGmo = SVGmo;","map":{"version":3,"mappings":"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","names":["VFUZZ","HFUZZ","__extends","SVGmo","parent","attributes","node","symmetric","get","stretch","dir","stretchy","size","getStretchedVariant","svg","standardSVGnode","stretchSVG","u","fixed","getCenterOffset","v","getProperty","getAccentOffset","adaptor","setAttribute","addChildren","variants","getStretchVariants","bbox","getBBox","stretchVertical","stretchHorizontal","c","getText","codePointAt","keys","_c","i","font","getStretchVariant","variant","d","w","T","addTop","h","B","addBot","length","addMidV","H","D","addExtV","L","addLeft","R","addRight","addMidH","x1","x2","w2","addExtH","n","char","getChar","x","y","placeChar","element","W","addGlyph","Math","max","Y","s","width","height","viewBox","map","join","glyph","lastChild","jax","append","params","axis_height","X","mo_js_2","prototype","kind","mo_js_1","Wrapper_js_1","exports"],"sources":["/home/kinzoku99/Desktop/ProjectIO/frontend/node_modules/mathjax-full/ts/output/svg/Wrappers/mo.ts"],"sourcesContent":["\n/*************************************************************\n *\n *  Copyright (c) 2018-2021 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the SVGmo wrapper for the MmlMo object\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {SVGWrapper, SVGConstructor} from '../Wrapper.js';\nimport {CommonMoMixin} from '../../common/Wrappers/mo.js';\nimport {MmlMo} from '../../../core/MmlTree/MmlNodes/mo.js';\nimport {BBox} from '../../../util/BBox.js';\nimport {DIRECTION, SVGCharData, SVGCharOptions} from '../FontData.js';\n\n\n/*****************************************************************/\n\nconst VFUZZ = 0.1;       // overlap for vertical stretchy glyphs\nconst HFUZZ = 0.1;       // overlap for horizontal stretchy glyphs\n\n/*****************************************************************/\n/**\n * The SVGmo wrapper for the MmlMo object\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\n// @ts-ignore\nexport class SVGmo<N, T, D> extends\nCommonMoMixin<SVGConstructor<any, any, any>>(SVGWrapper) {\n\n  /**\n   * The mo wrapper\n   */\n  public static kind = MmlMo.prototype.kind;\n\n  /**\n   * @override\n   */\n  public toSVG(parent: N) {\n    const attributes = this.node.attributes;\n    const symmetric = (attributes.get('symmetric') as boolean) && this.stretch.dir !== DIRECTION.Horizontal;\n    const stretchy = this.stretch.dir !== DIRECTION.None;\n    if (stretchy && this.size === null) {\n      this.getStretchedVariant([]);\n    }\n    let svg = this.standardSVGnode(parent);\n    if (stretchy && this.size < 0) {\n      this.stretchSVG();\n    } else {\n      const u = (symmetric || attributes.get('largeop') ? this.fixed(this.getCenterOffset()) : '0');\n      const v = (this.node.getProperty('mathaccent') ? this.fixed(this.getAccentOffset()) : '0');\n      if (u !== '0' || v !== '0') {\n        this.adaptor.setAttribute(svg, 'transform', `translate(${v} ${u})`);\n      }\n      this.addChildren(svg);\n    }\n  }\n\n  /**\n   * Create the SVG for a multi-character stretchy delimiter\n   */\n  protected stretchSVG() {\n    const stretch = this.stretch.stretch;\n    const variants = this.getStretchVariants();\n    const bbox = this.getBBox();\n    if (this.stretch.dir === DIRECTION.Vertical) {\n      this.stretchVertical(stretch, variants, bbox);\n    } else {\n      this.stretchHorizontal(stretch, variants, bbox);\n    }\n  }\n\n  /**\n   * Get the variant array for the assembly pieces\n   */\n  protected getStretchVariants() {\n    const c = this.stretch.c || this.getText().codePointAt(0);\n    const variants = [] as string[];\n    for (const i of this.stretch.stretch.keys()) {\n      variants[i] = this.font.getStretchVariant(c, i);\n    }\n    return variants;\n  }\n\n  /**\n   * @param {number[]} stretch    The characters to use for stretching\n   * @param {string[]} variant    The variants for the parts to use for stretching\n   * @param {BBox} bbox           The full size of the stretched character\n   */\n  protected stretchVertical(stretch: number[], variant: string[], bbox: BBox) {\n    const {h, d, w} = bbox;\n    const T = this.addTop(stretch[0], variant[0], h, w);\n    const B = this.addBot(stretch[2], variant[2], d, w);\n    if (stretch.length === 4) {\n      const [H, D] = this.addMidV(stretch[3], variant[3], w);\n      this.addExtV(stretch[1], variant[1], h, 0, T, H, w);\n      this.addExtV(stretch[1], variant[1], 0, d, D, B, w);\n    } else {\n      this.addExtV(stretch[1], variant[1], h, d, T, B, w);\n    }\n  }\n\n  /**\n   * @param {number[]} stretch    The characters to use for stretching\n   * @param {string[]} variant    The variants for the parts to use for stretching\n   * @param {BBox} bbox           The full size of the stretched character\n   */\n  protected stretchHorizontal(stretch: number[], variant: string[], bbox: BBox) {\n    const w = bbox.w;\n    const L = this.addLeft(stretch[0], variant[0]);\n    const R = this.addRight(stretch[2], variant[2], w);\n    if (stretch.length === 4) {\n      const [x1, x2] = this.addMidH(stretch[3], variant[3], w);\n      const w2 = w / 2;\n      this.addExtH(stretch[1], variant[1], w2, L, w2 - x1);\n      this.addExtH(stretch[1], variant[1], w2, x2 - w2, R, w2);\n    } else {\n      this.addExtH(stretch[1], variant[1], w, L, R);\n    }\n  }\n\n  /***********************************************************/\n\n  /**\n   * @param {number} n         The number of the character to look up\n   * @param {string} variant   The variant for the character to look up\n   * @return {SVGCharData}     The full CharData object, with CharOptions guaranteed to be defined\n   */\n  protected getChar(n: number, variant: string): SVGCharData {\n    const char = this.font.getChar(variant, n) || [0, 0, 0, null];\n    return [char[0], char[1], char[2], char[3] || {}] as [number, number, number, SVGCharOptions];\n  }\n\n  /**\n   * @param {number} n         The character code for the glyph\n   * @param {string} variant   The variant for the glyph\n   * @param {number} x         The x position of the glyph\n   * @param {number} y         The y position of the glyph\n   * @param {N} parent         The container for the glyph\n   * @return {number}          The width of the character placed\n   */\n  protected addGlyph(n: number, variant: string, x: number, y: number, parent: N = null): number {\n    return this.placeChar(n, x, y, parent || this.element, variant);\n  }\n\n  /***********************************************************/\n\n  /**\n   * @param {number} n    The character number for the top glyph\n   * @param {string} v    The variant for the top glyph\n   * @param {number} H    The height of the stretched delimiter\n   * @param {number} W    The width of the stretched delimiter\n   * @return {number}     The total height of the top glyph\n   */\n  protected addTop(n: number, v: string, H: number, W: number): number {\n    if (!n)  return 0;\n    const [h, d, w] = this.getChar(n, v);\n    this.addGlyph(n, v, (W - w) / 2, H - h);\n    return h + d;\n  }\n\n  /**\n   * @param {number} n    The character number for the extender glyph\n   * @param {string} v    The variant for the extender glyph\n   * @param {number} H    The height of the stretched delimiter\n   * @param {number} D    The depth of the stretched delimiter\n   * @param {number} T    The height of the top glyph in the delimiter\n   * @param {number} B    The height of the bottom glyph in the delimiter\n   * @param {number} W    The width of the stretched delimiter\n   */\n  protected addExtV(n: number, v: string, H: number, D: number, T: number, B: number, W: number) {\n    if (!n) return;\n    T = Math.max(0, T - VFUZZ);              // A little overlap on top\n    B = Math.max(0, B - VFUZZ);              // A little overlap on bottom\n    const adaptor = this.adaptor;\n    const [h, d, w] = this.getChar(n, v);\n    const Y = H + D - T - B;                 // The height of the extender\n    const s = 1.5 * Y / (h + d);             // Scale height by 1.5 to avoid bad ends\n    //   (glyphs with rounded or anti-aliased ends don't stretch well,\n    //    so this makes for sharper ends)\n    const y = (s * (h - d) - Y) / 2;         // The bottom point to clip the extender\n    if (Y <= 0) return;\n    const svg = this.svg('svg', {\n      width: this.fixed(w), height: this.fixed(Y),\n      y: this.fixed(B - D), x: this.fixed((W - w) / 2),\n      viewBox: [0, y, w, Y].map(x => this.fixed(x)).join(' ')\n    });\n    this.addGlyph(n, v, 0, 0, svg);\n    const glyph = adaptor.lastChild(svg);\n    adaptor.setAttribute(glyph, 'transform', `scale(1,${this.jax.fixed(s)})`);\n    adaptor.append(this.element, svg);\n  }\n\n  /**\n   * @param {number} n    The character number for the bottom glyph\n   * @param {string} v    The variant for the bottom glyph\n   * @param {number} D    The depth of the stretched delimiter\n   * @param {number} W    The width of the stretched delimiter\n   * @return {number}     The total height of the bottom glyph\n   */\n  protected addBot(n: number, v: string, D: number, W: number): number {\n    if (!n) return 0;\n    const [h, d, w] = this.getChar(n, v);\n    this.addGlyph(n, v, (W - w) / 2, d - D);\n    return h + d;\n  }\n\n  /**\n   * @param {number} n    The character number for the middle glyph\n   * @param {string} v    The variant for the middle glyph\n   * @param {number} W    The width of the stretched delimiter\n   * @return {[number, number]}   The top and bottom positions of the middle glyph\n   */\n  protected addMidV(n: number, v: string, W: number): [number, number] {\n    if (!n) return [0, 0];\n    const [h, d, w] = this.getChar(n, v);\n    const y = (d - h) / 2 + this.font.params.axis_height;\n    this.addGlyph(n, v, (W - w) / 2, y);\n    return [h + y, d - y];\n  }\n\n  /***********************************************************/\n\n  /**\n   * @param {number} n   The character number for the left glyph of the stretchy character\n   * @param {string} v   The variant for the left glyph\n   * @return {number}    The width of the left glyph\n   */\n  protected addLeft(n: number, v: string): number {\n    return (n ? this.addGlyph(n, v, 0, 0) : 0);\n  }\n\n  /**\n   * @param {number} n   The character number for the extender glyph of the stretchy character\n   * @param {string} v   The variant for the extender glyph\n   * @param {number} W   The width of the stretched character\n   * @param {number} L   The width of the left glyph of the stretchy character\n   * @param {number} R   The width of the right glyph of the stretchy character\n   * @param {number} x   The x-position of the extender (needed for ones with two extenders)\n   */\n  protected addExtH(n: number, v: string, W: number, L: number, R: number, x: number = 0) {\n    if (!n) return;\n    R = Math.max(0, R - HFUZZ);     // A little less than the width of the right glyph\n    L = Math.max(0, L - HFUZZ);     // A little less than the width of the left glyph\n    const adaptor = this.adaptor;\n    const [h, d, w] = this.getChar(n, v);\n    const X = W - L - R;            // The width of the extender\n    const Y = h + d + 2 * VFUZZ;    // The height (plus some fuzz) of the extender\n    const s = 1.5 * (X / w);        // Scale the width so that left- and right-bearing won't hurt us\n    const D = -(d + VFUZZ);         // The bottom position of the glyph\n    if (X <= 0) return;\n    const svg = this.svg('svg', {\n      width: this.fixed(X), height: this.fixed(Y),\n      x: this.fixed(x + L), y: this.fixed(D),\n      viewBox: [(s * w - X) / 2, D, X, Y].map(x => this.fixed(x)).join(' ')\n    });\n    this.addGlyph(n, v, 0, 0, svg);\n    const glyph = adaptor.lastChild(svg);\n    adaptor.setAttribute(glyph, 'transform', 'scale(' + this.jax.fixed(s) + ',1)');\n    adaptor.append(this.element, svg);\n  }\n\n  /**\n   * @param {number} n   The character number for the right glyph of the stretchy character\n   * @param {string} v   The variant for the right glyph\n   * @param {number} W   The width of the stretched character\n   * @return {number}    The width of the right glyph\n   */\n  protected addRight(n: number, v: string, W: number): number {\n    if (!n) return 0;\n    const w = this.getChar(n, v)[2];\n    return this.addGlyph(n, v, W - w, 0);\n  }\n\n  /**\n   * @param {number} n   The character number for the middle glyph of the stretchy character\n   * @param {string} v   The variant for the middle glyph\n   * @param {number} W   The width of the stretched character\n   * @return {[number, number]}  The positions of the left and right edges of the middle glyph\n   */\n  protected addMidH(n: number, v: string, W: number): [number, number] {\n    if (!n) return [0, 0];\n    const w = this.getChar(n, v)[2];\n    this.addGlyph(n, v, (W - w) / 2, 0);\n    return [(W - w) / 2, (W + w) / 2];\n  }\n\n}\n"]},"metadata":{},"sourceType":"script"}