{"ast":null,"code":"var _jsxFileName = \"/home/kinzoku99/Desktop/ProjectIO/frontend/src/components/ExactIntCalculator.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { EQ, iEQ } from \"../mathOutputFunctions\"; // TODO typowanie w funkcjach do obliczania jeszcze do poprawki\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Expression {\n  constructor() {\n    if (this.constructor === Expression) {\n      throw new Error(\"Abstract class\");\n    }\n  }\n\n  evaluate(argument) {\n    throw new Error(\"Abstract method\");\n  }\n\n  integrate() {\n    throw new Error(\"Abstract method\");\n  }\n\n  print() {\n    throw new Error(\"Abstract method\");\n  }\n\n}\n\nfunction gcd(a, b) {\n  return b < a ? gcd(b, a) : a === 0 ? b : gcd(b % a, a);\n}\n\nfunction sign(x) {\n  return x < 0 ? -1 : x > 0 ? 1 : 0;\n}\n\nclass Fraction extends Expression {\n  constructor(numerator, denominator) {\n    super();\n    this.sign = void 0;\n    this.numerator = void 0;\n    this.denominator = void 0;\n    this.sign = sign(numerator) * sign(denominator);\n    numerator *= sign(numerator);\n    denominator *= sign(denominator);\n    let common = gcd(numerator, denominator);\n    this.numerator = numerator / common;\n    this.denominator = denominator / common;\n  }\n\n  multiply(other) {\n    this.numerator *= this.sign;\n    other.numerator *= other.sign;\n    return new Fraction(this.numerator * other.numerator, this.denominator * other.denominator);\n  }\n\n  divide(other) {\n    this.numerator *= this.sign;\n    other.numerator *= other.sign;\n    return new Fraction(this.numerator * other.denominator, this.denominator * other.numerator);\n  }\n\n  add(other) {\n    this.numerator *= this.sign;\n    other.numerator *= other.sign;\n    return new Fraction(this.numerator * other.denominator + other.numerator * this.denominator, this.denominator * other.denominator);\n  }\n\n  subtract(other) {\n    this.numerator *= this.sign;\n    other.numerator *= other.sign;\n    return new Fraction(this.numerator * other.denominator - other.numerator * this.denominator, this.denominator * other.denominator);\n  }\n\n  evaluate() {\n    if (this.denominator === 0) throw new Error(\"Invalid fraction\");else return this.numerator * this.sign / this.denominator;\n  }\n\n  isZero() {\n    return this.numerator === 0 && this.denominator !== 0;\n  }\n\n  isOne() {\n    return this.numerator === 1 && this.denominator === 1;\n  }\n\n  print() {\n    if (this.denominator === 1) return String(this.sign * this.numerator);else if (this.numerator === 0) return \"0\";else if (this.denominator === 0) return \"undefined\";else return \"\\\\frac{\" + String(this.sign * this.numerator) + \"}{\" + String(this.denominator) + \"}\";\n  }\n\n}\n\nclass Polynomial extends Expression {\n  constructor(monomials) {\n    super();\n    this.monomials = void 0;\n    this.monomials = monomials.sort((x, y) => y.exp - x.exp);\n    console.log(this.monomials);\n  }\n\n  evaluate(argument) {\n    // @ts-ignore\n    return this.monomials.reduce((prev, curr) => prev + curr.evaluate(argument), 0);\n  }\n\n  integrate() {\n    return new Polynomial(this.monomials.map(x => x.integrate()));\n  }\n\n  print() {\n    return this.monomials[0] ? this.monomials.slice(1).reduce((prev, curr) => prev + \"+\" + curr.print(), this.monomials[0].print()) : \"\";\n  }\n\n} //Coeff to fraction\n//Exp to liczba całkowita nieujemna\n\n\nclass Monomial extends Expression {\n  constructor(coeff, exp) {\n    super();\n    this.coeff = void 0;\n    this.exp = void 0;\n    this.coeff = coeff;\n    this.exp = exp;\n  }\n\n  evaluate(argument) {\n    return this.coeff.multiply(new Fraction(Math.pow(argument, this.exp), 1));\n  }\n\n  integrate() {\n    return new Monomial(new Fraction(this.coeff.numerator * this.coeff.sign, this.coeff.denominator * (this.exp + 1)), this.exp + 1);\n  }\n\n  print() {\n    if (this.exp === 0) return this.coeff.print();else if (this.exp === 1) return this.coeff.isOne() ? this.coeff.sign === 1 ? \"x\" : \"-x\" : this.coeff.print() + \"x\";else return this.coeff.isOne() ? \"x^{\" + String(this.exp) + \"}\" : this.coeff.print() + \"x^{\" + String(this.exp) + \"}\";\n  }\n\n} //pair must be a double element array\n\n\nfunction pairMonomial(pair) {\n  if (pair.length === 1) return new Monomial(new Fraction(pair[0], 1), 1);else if (pair.length !== 2) throw Error(\"Invalid pair\");else return new Monomial(new Fraction(pair[0], 1), pair[1]);\n}\n\nfunction testInput(input) {\n  //Ten regex obsługuje na razie jedynie wielomiany z całkowitymi współczynnikami.\n  let regex = new RegExp(\"^(\\\\-)?((\\\\d+)|(\\\\d*x(\\\\^\\\\d+)?))((\\\\+|\\\\+\\\\-)((\\\\d+)|(\\\\d*x(\\\\^\\\\d+)?)))*$\");\n  return regex.test(input);\n}\n\nfunction calculateResult(input) {\n  let plus = new RegExp(\"\\\\+\");\n  let expSign = new RegExp(\"\\\\^\");\n  let xSign = new RegExp(\"x\");\n  let monomials = input.split(plus);\n  let poly = new Polynomial(monomials.map(x => xSign.test(x) ? pairMonomial(x.split(expSign).map(x => parseInt(x, 10))) : new Monomial(new Fraction(parseInt(x, 10), 1), 0)));\n  return [poly.print(), poly.integrate().print()];\n}\n\nconst ExactIntCalculator = () => {\n  _s();\n\n  let [input, setInput] = useState(\"\");\n  let [result, setResult] = useState(\"\");\n\n  function handleClick() {\n    let data = input.split(' ').join('').replaceAll(\"-\", \"+-\").replaceAll(\"-x\", \"-1x\").replaceAll(\"+x\", \"+1x\").replace(new RegExp(\"^x\"), \"1x\");\n    if (data.charAt(0) === '+') data = data.substring(1);\n\n    if (!testInput(data)) {\n      alert(\"Bad input\");\n      setResult(\"\");\n    } else {\n      let res = calculateResult(data);\n      setResult(\"\\\\int_0^{x} \" + res[0] + \"\\\\: dx = \" + res[1]);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 23\n      }, this), \"Dupa kupa i chuj \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calculator-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"container text-center py-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row py-lg-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-6 col-md-8 mx-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"fw-light\",\n              children: \"Kalkulator wielomianowy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"lead text-muted\",\n              children: \"Ten kalkulator liczy funkcj\\u0119 pierwotn\\u0105 wielomianu.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-6 col-md-8 mx-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted\",\n              children: [\"Wpisz wielomian w postaci og\\xF3lnej \", iEQ(\"a_nx^n + \\\\ldots + a_1x + a_0\"), \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"exactexpression\",\n                id: \"exactexpression\",\n                onChange: e => {\n                  setInput(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"button\",\n                value: \"Policz\",\n                name: \"exactbtn\",\n                id: \"exactbtn\",\n                onClick: handleClick\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"exactresult\",\n              className: \"my-5\",\n              children: EQ(result)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ExactIntCalculator, \"YzqDyJ2o9kOXO561mkhTut2HHmk=\");\n\n_c = ExactIntCalculator;\nexport default ExactIntCalculator;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExactIntCalculator\");","map":{"version":3,"sources":["/home/kinzoku99/Desktop/ProjectIO/frontend/src/components/ExactIntCalculator.tsx"],"names":["React","useState","EQ","iEQ","Expression","constructor","Error","evaluate","argument","integrate","print","gcd","a","b","sign","x","Fraction","numerator","denominator","common","multiply","other","divide","add","subtract","isZero","isOne","String","Polynomial","monomials","sort","y","exp","console","log","reduce","prev","curr","map","slice","Monomial","coeff","Math","pow","pairMonomial","pair","length","testInput","input","regex","RegExp","test","calculateResult","plus","expSign","xSign","split","poly","parseInt","ExactIntCalculator","setInput","result","setResult","handleClick","data","join","replaceAll","replace","charAt","substring","alert","res","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {EQ, iEQ} from \"../mathOutputFunctions\";\n\n\n// TODO typowanie w funkcjach do obliczania jeszcze do poprawki\nclass Expression {\n    constructor() {\n        if (this.constructor === Expression) {\n            throw new Error(\"Abstract class\");\n        }\n    }\n\n    evaluate(argument: any) {\n        throw new Error(\"Abstract method\");\n    }\n\n    integrate() {\n        throw new Error(\"Abstract method\");\n    }\n\n    print() {\n        throw new Error(\"Abstract method\");\n    }\n}\n\nfunction gcd(a: number, b: number): number {\n    return b < a ? gcd(b, a) : (a === 0 ? b : gcd(b % a, a));\n}\n\nfunction sign(x: number): number {\n    return x < 0 ? -1 : (x > 0 ? 1 : 0);\n}\n\nclass Fraction extends Expression {\n    readonly sign: number;\n    numerator: number;\n    readonly denominator: number;\n\n    constructor(numerator: number, denominator: number) {\n        super();\n        this.sign = sign(numerator) * sign(denominator);\n        numerator *= sign(numerator);\n        denominator *= sign(denominator);\n        let common = gcd(numerator, denominator);\n        this.numerator = numerator / common;\n        this.denominator = denominator / common;\n    }\n\n    multiply(other: Fraction) {\n        this.numerator *= this.sign;\n        other.numerator *= other.sign;\n        return new Fraction(this.numerator * other.numerator, this.denominator * other.denominator);\n    }\n\n    divide(other: Fraction) {\n        this.numerator *= this.sign;\n        other.numerator *= other.sign;\n        return new Fraction(this.numerator * other.denominator, this.denominator * other.numerator);\n    }\n\n    add(other: Fraction) {\n        this.numerator *= this.sign;\n        other.numerator *= other.sign;\n        return new Fraction(this.numerator * other.denominator + other.numerator * this.denominator, this.denominator * other.denominator);\n    }\n\n    subtract(other: Fraction) {\n        this.numerator *= this.sign;\n        other.numerator *= other.sign;\n        return new Fraction(this.numerator * other.denominator - other.numerator * this.denominator, this.denominator * other.denominator);\n    }\n\n    evaluate() {\n        if (this.denominator === 0)\n            throw new Error(\"Invalid fraction\");\n        else\n            return this.numerator * this.sign / this.denominator;\n    }\n\n    isZero() {\n        return this.numerator === 0 && this.denominator !== 0;\n    }\n\n    isOne() {\n        return this.numerator === 1 && this.denominator ===  1;\n    }\n\n    print() {\n        if (this.denominator === 1)\n            return String(this.sign * this.numerator);\n        else if (this.numerator === 0)\n            return \"0\";\n        else if (this.denominator === 0)\n            return \"undefined\";\n        else\n            return \"\\\\frac{\"+ String(this.sign * this.numerator) + \"}{\" + String(this.denominator) + \"}\";\n    }\n}\n\nclass Polynomial extends Expression {\n    private readonly monomials: Monomial[];\n\n    constructor(monomials: Monomial[]) {\n        super();\n        this.monomials = monomials.sort((x, y) => y.exp - x.exp);\n        console.log(this.monomials);\n    }\n\n    evaluate(argument: number) {\n        // @ts-ignore\n        return this.monomials.reduce((prev, curr) => prev + curr.evaluate(argument),0);\n    }\n\n    integrate() {\n        return new Polynomial(this.monomials.map(x => x.integrate()));\n    }\n\n    print() {\n        return this.monomials[0] ? this.monomials.slice(1).reduce((prev, curr) => prev + \"+\" + curr.print(),this.monomials[0].print()) : \"\";\n    }\n}\n\n//Coeff to fraction\n//Exp to liczba całkowita nieujemna\nclass Monomial extends Expression {\n    private coeff: Fraction;\n    exp: number;\n\n    constructor(coeff: Fraction, exp: number) {\n        super();\n        this.coeff = coeff;\n        this.exp = exp;\n    }\n\n    evaluate(argument: number) {\n        return this.coeff.multiply(new Fraction(Math.pow(argument, this.exp),1));\n    }\n\n    integrate() {\n        return new Monomial(new Fraction(this.coeff.numerator * this.coeff.sign, this.coeff.denominator * (this.exp + 1)), this.exp + 1);\n    }\n\n    print() {\n        if (this.exp === 0)\n            return this.coeff.print();\n        else if(this.exp === 1)\n            return this.coeff.isOne() ? (this.coeff.sign === 1 ? \"x\" : \"-x\") : this.coeff.print() + \"x\";\n        else\n            return this.coeff.isOne() ? \"x^{\" + String(this.exp) + \"}\" : this.coeff.print() + \"x^{\" + String(this.exp) + \"}\";\n    }\n}\n\n//pair must be a double element array\nfunction pairMonomial(pair: number[]) {\n    if (pair.length === 1)\n        return new Monomial(new Fraction(pair[0], 1), 1);\n    else if (pair.length !== 2)\n        throw Error(\"Invalid pair\");\n    else\n        return new Monomial(new Fraction(pair[0], 1), pair[1]);\n}\n\nfunction testInput(input: string) {\n    //Ten regex obsługuje na razie jedynie wielomiany z całkowitymi współczynnikami.\n    let regex = new RegExp(\"^(\\\\-)?((\\\\d+)|(\\\\d*x(\\\\^\\\\d+)?))((\\\\+|\\\\+\\\\-)((\\\\d+)|(\\\\d*x(\\\\^\\\\d+)?)))*$\");\n\n    return regex.test(input);\n}\n\nfunction calculateResult(input: string) {\n    let plus = new RegExp(\"\\\\+\");\n    let expSign = new RegExp(\"\\\\^\");\n    let xSign = new RegExp(\"x\");\n    let monomials = input.split(plus);\n    let poly = new Polynomial(monomials.map(x => xSign.test(x) ? pairMonomial(x.split(expSign).map(x => parseInt(x, 10))) : new Monomial(new Fraction(parseInt(x, 10), 1), 0)));\n    return [poly.print(), poly.integrate().print()];\n}\n\nconst ExactIntCalculator: React.FC = () => {\n    let [input, setInput] = useState<string>(\"\");\n    let [result, setResult] = useState<string>(\"\");\n\n    function handleClick() {\n        let data = input.split(' ').join('').replaceAll(\"-\",\"+-\").replaceAll(\"-x\",\"-1x\")\n            .replaceAll(\"+x\",\"+1x\").replace(new RegExp(\"^x\"),\"1x\");\n\n        if (data.charAt(0) === '+')\n            data = data.substring(1);\n\n        if (!testInput(data)) {\n            alert(\"Bad input\");\n            setResult(\"\");\n        }\n        else {\n            let res = calculateResult(data);\n            setResult(\"\\\\int_0^{x} \" + res[0] + \"\\\\: dx = \" + res[1]);\n        }\n    }\n\n    return (\n        <main>\n\t\t\t<div>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\t\t\t\t\tDupa kupa i chuj <br/>\n\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t<div className=\"calculator-panel\">\n\t\t\t\t\n\t\t\t\t{/* To jest sekcja nagłówka naszej strony czyli o czym to jest */}\n\t\t\t\t<section className=\"container text-center py-5\">\n\t\t\t\t\t<div className=\"row py-lg-5\">\n\t\t\t\t\t\t<div className=\"col-lg-6 col-md-8 mx-auto\">\n\t\t\t\t\t\t\t<h1 className=\"fw-light\">Kalkulator wielomianowy</h1>\n\n\t\t\t\t\t\t\t<p className=\"lead text-muted\">\n\t\t\t\t\t\t\t\tTen kalkulator liczy funkcję pierwotną wielomianu.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<section className=\"container\">\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t<div className=\"col-lg-6 col-md-8 mx-auto\">\n\t\t\t\t\t\t\t<p className=\"text-muted\">\n\t\t\t\t\t\t\t\tWpisz wielomian w postaci ogólnej {iEQ(\"a_nx^n + \\\\ldots + a_1x + a_0\")}:\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"exactexpression\" id=\"exactexpression\" onChange={(e) => {setInput(e.target.value)}}/>\n\t\t\t\t\t\t\t\t<input type=\"button\" value=\"Policz\" name=\"exactbtn\" id=\"exactbtn\" onClick={handleClick}/>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t<div id=\"exactresult\" className=\"my-5\">\n\t\t\t\t\t\t\t\t{EQ(result)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</div>\n        </main>\n    );\n}\n\nexport default ExactIntCalculator;"]},"metadata":{},"sourceType":"module"}